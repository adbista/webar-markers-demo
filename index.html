<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <title>AR Memory Game - Gra Pamiƒôciowa</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://aframe.io/releases/1.6.0/aframe.min.js"></script>
    <script src="https://raw.githack.com/AR-js-org/AR.js/3.4.7/aframe/build/aframe-ar.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/hands"></script>
    <script type="module" src="js/main.js"></script>
</head>
<body style="margin: 0px; overflow: hidden;">
    <!-- AR.js Loading Screen -->
    <div class="arjs-loader">
        <div>≈Åadowanie AR, proszƒô czekaƒá...</div>
    </div>
    
    <div id="ui">
        <div id="level">Poziom: 1</div>
        <div id="score">Wynik: 0</div>
        <div id="status">Obserwuj sekwencjƒô...</div>
        <div id="gesture-status">‚úã Gesty: Nieaktywne</div>
        <div id="combo">üî• Combo: 0</div>
    </div>
    
    <!-- Panel wyzwania gestowego -->
    <div id="gesture-challenge" style="display:none;">
        <div class="challenge-title">‚ö° SZYBKA REAKCJA!</div>
        <div id="gesture-prompt" class="gesture-prompt"></div>
        <div class="challenge-timer" id="challenge-timer">10</div>
    </div>
    
    <!-- Efekt sukcesu -->
    <div id="gesture-success" style="display:none;">
        <div class="success-emoji">&#x1F929;</div>
        <div class="success-text">SUPER!</div>
        <div class="success-sparkles">
            <span class="sparkle">&#x2728;</span>
            <span class="sparkle">&#x2728;</span>
            <span class="sparkle">&#x2728;</span>
            <span class="sparkle">&#x2728;</span>
        </div>
    </div>
    
    <!-- Efekt pora≈ºki -->
    <div id="gesture-fail" style="display:none;">
        <div class="fail-emoji">&#x1F622;</div>
        <div class="fail-text">O NIE!</div>
    </div>
    
    <canvas id="gesture-canvas" style="display:none;"></canvas>
    
    <button id="toggleUI" class="toggle-ui-btn">üëÅÔ∏è</button>
    
    <div id="controls">
        <button id="btnRed" class="color-btn red-btn" data-color="red">üî¥<br>CZERWONY</button>
        <button id="btnGreen" class="color-btn green-btn" data-color="green">üü¢<br>ZIELONY</button>
        <button id="btnBlue" class="color-btn blue-btn" data-color="blue">üîµ<br>NIEBIESKI</button>
    </div>
    
    <div id="gameOver">
        <h1>Gra sko≈Ñczona!</h1>
        <p id="finalScore">OsiƒÖgniƒôty poziom: 1</p>
        <p id="finalPoints">Punkty: 0</p>
        <button id="restartBtn">Zagraj ponownie</button>
    </div>
    
    <div id="instructions">
        üß† Gra Pamiƒôciowa AR<br>Zapamiƒôtaj sekwencjƒô b≈Çysk√≥w i kliknij/dotknij ekranu nad markerami!
    </div>

    <a-scene
        embedded
        arjs="sourceType: webcam"
        vr-mode-ui="enabled: false"
        renderer="precision: medium;"
        background="transparent: true"
        cursor="rayOrigin: mouse">
        
        <!-- Marker 1 - Czerwony -->
        <a-marker type="pattern" url="assets/marker.patt" id="marker1" emitevents="true">
            <a-plane
                id="clickable1"
                position="0 0.5 0"
                rotation="-90 0 0"
                width="1.5"
                height="1.5"
                color="red"
                opacity="0.01"
                class="clickable"
                data-color="red">
            </a-plane>
            
            <!-- Punkt ≈õwiat≈Ça -->
            <a-light type="point" color="#FF0000" intensity="0" position="0 0.5 0" id="light1"></a-light>
            
            <!-- Czerwona kula -->
            <a-sphere
                id="sphere1"
                position="0 0.5 0"
                radius="0.3"
                color="#FF0000"
                metalness="0.5"
                roughness="0.5"
                data-color="red"
                animation="property: rotation; to: 0 360 0; loop: true; dur: 20000; easing: linear"
                animation__float="property: position; from: 0 0.5 0; to: 0 0.55 0; dir: alternate; loop: true; dur: 3000; easing: easeInOutSine">
            </a-sphere>
            
            <!-- Pier≈õcie≈Ñ orbitujƒÖcy -->
            <a-torus 
                radius="0.35" 
                radius-tubular="0.015" 
                color="#FF6666"
                position="0 0.5 0"
                rotation="90 0 0"
                opacity="0.6"
                metalness="0.8"
                roughness="0.2"
                animation="property: rotation; to: 90 360 0; loop: true; dur: 4000; easing: linear"
                animation__pulse="property: scale; from: 1 1 1; to: 1.2 1.2 1.2; dir: alternate; loop: true; dur: 2000; easing: easeInOutSine">
            </a-torus>
            
            <!-- System czƒÖstek -->
            <a-entity id="particles1" position="0 0.5 0" 
                particle-system="preset: default; color: #FF0000,#FF6666,#FFCCCC; particleCount: 50; maxAge: 2; size: 0.1,0.15; velocityValue: 0 1 0; velocitySpread: 0.3 0.3 0.3; accelerationValue: 0 -0.5 0; blending: 1; opacity: 0.8,0.3">
            </a-entity>
            
            <a-text 
                value="Czerwony" 
                align="center"
                position="0 1.2 0" 
                scale="0.4 0.4 0.4"
                color="#FFFFFF"
                animation="property: scale; to: 0.45 0.45 0.45; dir: alternate; dur: 1000; loop: true">
            </a-text>
        </a-marker>

        <!-- Marker 2 - Zielony -->
        <a-marker type="pattern" url="assets/markerApple.patt" id="marker2" emitevents="true">
            <a-plane
                id="clickable2"
                position="0 0.5 0"
                rotation="-90 0 0"
                width="1.5"
                height="1.5"
                color="green"
                opacity="0.01"
                class="clickable"
                data-color="green">
            </a-plane>
            
            <!-- Punkt ≈õwiat≈Ça -->
            <a-light type="point" color="#00FF00" intensity="0" position="0 0.5 0" id="light2"></a-light>
            
            <!-- Zielona kula -->
            <a-sphere
                id="sphere2"
                position="0 0.5 0"
                radius="0.3"
                color="#00FF00"
                metalness="0.5"
                roughness="0.5"
                data-color="green"
                animation="property: rotation; to: 0 360 0; loop: true; dur: 18000; easing: linear"
                animation__float="property: position; from: 0 0.5 0; to: 0 0.56 0; dir: alternate; loop: true; dur: 3500; easing: easeInOutSine">
            </a-sphere>
            
            <!-- Pier≈õcie≈Ñ orbitujƒÖcy -->
            <a-torus 
                radius="0.35" 
                radius-tubular="0.015" 
                color="#66FF66"
                position="0 0.5 0"
                rotation="90 0 0"
                opacity="0.6"
                metalness="0.8"
                roughness="0.2"
                animation="property: rotation; to: 90 360 0; loop: true; dur: 3500; easing: linear"
                animation__pulse="property: scale; from: 1 1 1; to: 1.2 1.2 1.2; dir: alternate; loop: true; dur: 2200; easing: easeInOutSine">
            </a-torus>
            
            <!-- System czƒÖstek -->
            <a-entity id="particles2" position="0 0.5 0" 
                particle-system="preset: default; color: #00FF00,#66FF66,#CCFFCC; particleCount: 50; maxAge: 2; size: 0.1,0.15; velocityValue: 0 1 0; velocitySpread: 0.3 0.3 0.3; accelerationValue: 0 -0.5 0; blending: 1; opacity: 0.8,0.3">
            </a-entity>
            
            <a-text 
                value="Zielony" 
                align="center" 
                position="0 1.2 0" 
                scale="0.4 0.4 0.4"
                color="#FFFFFF"
                animation="property: scale; to: 0.45 0.45 0.45; dir: alternate; dur: 1000; loop: true">
            </a-text>
        </a-marker>

        <!-- Marker 3 - Niebieski -->
        <a-marker type="pattern" url="assets/dot0.patt" id="marker3" emitevents="true">
            <a-plane
                id="clickable3"
                position="0 0.5 0"
                rotation="-90 0 0"
                width="1.5"
                height="1.5"
                color="blue"
                opacity="0.01"
                class="clickable"
                data-color="blue">
            </a-plane>
            
            <!-- Punkt ≈õwiat≈Ça -->
            <a-light type="point" color="#0000FF" intensity="0" position="0 0.5 0" id="light3"></a-light>
            
            <!-- Niebieska kula -->
            <a-sphere
                id="sphere3"
                position="0 0.5 0"
                radius="0.3"
                color="#0000FF"
                metalness="0.5"
                roughness="0.5"
                
                data-color="blue"
                animation="property: rotation; to: 0 360 0; loop: true; dur: 22000; easing: linear"
                animation__float="property: position; from: 0 0.5 0; to: 0 0.54 0; dir: alternate; loop: true; dur: 2800; easing: easeInOutSine">
            </a-sphere>
            
            <!-- Pier≈õcie≈Ñ orbitujƒÖcy -->
            <a-torus 
                radius="0.35" 
                radius-tubular="0.015" 
                color="#6666FF"
                position="0 0.5 0"
                rotation="90 0 0"
                opacity="0.6"
                metalness="0.8"
                roughness="0.2"
                animation="property: rotation; to: 90 360 0; loop: true; dur: 4500; easing: linear"
                animation__pulse="property: scale; from: 1 1 1; to: 1.2 1.2 1.2; dir: alternate; loop: true; dur: 1800; easing: easeInOutSine">
            </a-torus>
            
            <!-- System czƒÖstek -->
            <a-entity id="particles3" position="0 0.5 0" 
                particle-system="preset: default; color: #0000FF,#6666FF,#CCCCFF; particleCount: 50; maxAge: 2; size: 0.1,0.15; velocityValue: 0 1 0; velocitySpread: 0.3 0.3 0.3; accelerationValue: 0 -0.5 0; blending: 1; opacity: 0.8,0.3">
            </a-entity>
            
            <a-text 
                value="Niebieski" 
                align="center" 
                position="0 1.2 0" 
                scale="0.4 0.4 0.4"
                color="#FFFFFF"
                animation="property: scale; to: 0.45 0.45 0.45; dir: alternate; dur: 1000; loop: true">
            </a-text>
        </a-marker>

        <a-entity light="type: ambient; intensity: 0.9;"></a-entity>
        <a-entity light="type: directional; intensity: 0.5;" position="1 1 1"></a-entity>

        <a-entity
            camera
            cursor="rayOrigin: mouse; fuse: false"
            raycaster="objects: .clickable">
        </a-entity>
    </a-scene>
</body>
</html>
