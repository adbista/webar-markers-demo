<!doctype html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script>
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
    <script src="https://raw.githack.com/AR-js-org/studio-backend/master/src/modules/marker/tools/gesture-detector.js"></script>
    <script src="https://raw.githack.com/AR-js-org/studio-backend/master/src/modules/marker/tools/gesture-handler.js"></script>

    <style>
      #infoPanel {
        position: fixed;
        left: 12px; right: 12px; bottom: 12px;
        z-index: 9999;
        display: none;
        padding: 16px;
        border-radius: 16px;
        background: rgba(15, 15, 15, 0.9);
        backdrop-filter: blur(10px);
        color: #fff;
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
        line-height: 1.4;
        box-shadow: 0 12px 40px rgba(0,0,0,0.5);
        border: 1px solid rgba(255,255,255,0.1);
      }
      #infoPanel .title { font-weight: 700; margin-bottom: 8px; font-size: 18px; letter-spacing: -0.02em; }
      #infoPanel .hint { opacity: 0.5; font-size: 10px; margin-top: 12px; text-transform: uppercase; letter-spacing: 0.05em; }
      #infoClose {
        position: absolute; top: 12px; right: 12px;
        background: rgba(255,255,255,0.1); border: 0; color: #fff;
        width: 28px; height: 28px; border-radius: 50%; cursor: pointer;
        display: flex; align-items: center; justify-content: center;
      }
      #infoBody p { margin: 10px 0; font-size: 14px; color: #ccc; }
      #infoBody ul { margin: 10px 0 0 18px; padding: 0; font-size: 14px; color: #ccc; }
      #infoBody li { margin: 6px 0; }
      #infoBody a { color: #007AFF; text-decoration: none; font-weight: 500; }
      .ctaRow { display: flex; gap: 8px; margin-top: 16px; flex-wrap: wrap; }
      .btn {
        display: inline-block; padding: 10px 20px; border-radius: 8px;
        background: #fff; color: #000; text-decoration: none;
        font-weight: 600; font-size: 13px; transition: opacity 0.2s;
      }
      .tag {
        display:inline-block; font-size: 10px; padding: 2px 8px; border-radius: 4px;
        background: rgba(255,255,255,0.15); vertical-align: middle; margin-left: 8px;
        text-transform: uppercase; font-weight: bold;
      }
    </style>
  </head>

  <body style="margin: 0; overflow: hidden;">
    <div id="infoPanel" role="dialog">
      <button id="infoClose" aria-label="Zamknij">✕</button>
      <div class="title" id="infoTitle"></div>
      <div id="infoBody"></div>
      <div class="hint">Status: Obiekt rozpoznany pomyślnie</div>
    </div>

    <a-scene
      vr-mode-ui="enabled: false;"
      loading-screen="enabled: false;"
      arjs="trackingMethod: best; sourceType: webcam; debugUIEnabled: false;"
      embedded
      gesture-detector
    >
      <a-marker id="marker-nike" type="pattern" preset="custom" url="assets/marker.patt" emitevents="true">
        <a-image src="assets/asset.png" scale="1 1 1" rotation="-90 0 0" gesture-handler></a-image>
      </a-marker>

      <a-marker id="marker-apple" type="pattern" preset="custom" url="assets/markerApple.patt" emitevents="true">
        <a-image src="assets/assetApple.jpeg" scale="1 1 1" rotation="-90 0 0" gesture-handler></a-image>
      </a-marker>

      <a-entity camera></a-entity>
    </a-scene>

    <script>
      window.addEventListener("DOMContentLoaded", () => {
        const panel = document.getElementById("infoPanel");
        const titleEl = document.getElementById("infoTitle");
        const bodyEl = document.getElementById("infoBody");
        const closeBtn = document.getElementById("infoClose");

        const markerNike = document.getElementById("marker-nike");
        const markerApple = document.getElementById("marker-apple");

        function showInfo(title, bodyHtml) {
          titleEl.innerHTML = title;
          bodyEl.innerHTML = bodyHtml;
          panel.style.display = "block";
        }

        function hideInfo() {
          panel.style.display = "none";
        }

        closeBtn.addEventListener("click", hideInfo);

        const content = {
          nike: {
            title: "Nike — Just Do It <span class='tag'>Premium</span>",
            html: `
              <p>Odkryj innowacje w świecie sportu. Nike dostarcza zaawansowane technologie, które wspierają sportowców na każdym poziomie zaawansowania.</p>
              <ul>
                <li>Amortyzacja Air Max i pianka ZoomX</li>
                <li>Materiały Dri-FIT odprowadzające wilgoć</li>
                <li>Zrównoważona produkcja Move to Zero</li>
              </ul>
              <div class="ctaRow">
                <a class="btn" href="https://www.nike.com/pl/" target="_blank">Nowości</a>
              </div>
            `
          },
          apple: {
            title: "Apple Ecosystem <span class='tag'>Direct</span>",
            html: `
              <p>Poznaj synergię sprzętu i oprogramowania. Urządzenia Apple zostały zaprojektowane, by współpracować ze sobą w sposób intuicyjny i bezpieczny.</p>
              <ul>
                <li>Wyświetlacze Liquid Retina XDR</li>
                <li>Prywatność i bezpieczeństwo danych</li>
                <li>Ekosystem usług iCloud i Apple Music</li>
              </ul>
              <div class="ctaRow">
                <a class="btn" href="https://www.apple.com/pl/iphone/" target="_blank">iPhone</a>
                <a class="btn" href="https://www.apple.com/pl/mac/" target="_blank">MacBook</a>
              </div>
            `
          }
        };

        // Obsługa Markera Nike
        markerNike.addEventListener("markerFound", () => {
          showInfo(content.nike.title, content.nike.html);
        });
        markerNike.addEventListener("markerLost", hideInfo);

        // Obsługa Markera Apple
        markerApple.addEventListener("markerFound", () => {
          showInfo(content.apple.title, content.apple.html);
        });
        markerApple.addEventListener("markerLost", hideInfo);
      });
    </script>
  </body>
</html>